import{id as h,ie as S}from"./story-BSn8dUZd.js";import{P as G,j as P,a as y,O as T,f as E,c as w,w as v,Q as C,R as B,S as X,T as D,W as L,Z as Y,_ as q,G as A}from"./ProjectionTransformation-BocI5WO--uZbcjq_m.js";import{g as I}from"./OperatorShapePreservingLength-BM4MoAaG-B6TepgyN.js";import"./main-evhEtFYV.js";import"./SimpleGeometryCursor-DSF_YyIm-TAMgMsbK.js";class F{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,g){return!1}canAccelerateGeometry(t){return!1}execute(t,r,g,o){if(g===4)return new I().execute(t,r,o);if(r.getCoordinateSystemType()===0&&G(""),P(t),t.isEmpty()||t.getDimension()<1)return 0;const s=r.getGCS(),a=A();s.querySpheroidData(a);const c=a.majorSemiAxis,u=a.e2,l=s.getUnit().getUnitToBaseFactor();let e;const n=t.getGeometryType();if(n===y.enumPolygon?e=t.getBoundary():n===y.enumEnvelope?e=T(t):E(n)?(e=new w({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new v().execute(e,0,r.getTolerance(0),0,o)),s!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=C(e,r),n===y.enumPolyline&&e===t&&(e=t.clone());const f=new B;r.getPannableExtent().queryIntervalX(f);for(let m=0,d=e.getPointCount();m<d;m++){const p=e.getXY(m);p.x=X(p.x,f),e.setXY(m,p)}}const x=e.createInstance();e=D(i,e,x,o)?x:new L().execute(e,i,o)}return this._ExecuteMultiPathGeodeticLength(e,g,c,u,l)}_ExecuteMultiPathGeodeticLength(t,r,g,o,s){const a={stack:[],error:void 0,hasError:!1};try{const c=h(a,new Y,!1);let u=0;const l=t.querySegmentIterator();for(;l.nextPath();)for(;l.hasNextSegment();){const e=l.nextSegment(),n=e.getStartXY(),i=e.getEndXY();n.scale(s),i.scale(s),q.geodeticDistance(g,o,n.x,n.y,i.x,i.y,c,null,null,r),u+=c.val}return u}catch(c){a.error=c,a.hasError=!0}finally{S(a)}}}export{F as OperatorGeodeticLength};
